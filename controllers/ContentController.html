<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>castcle-api documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">castcle-api documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content controller">
                   <div class="content-data">





<ol class="breadcrumb">
  <li>Controllers</li>
  <li >ContentController</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>apps/contents/src/app/app.controller.ts</code>
        </p>







            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#_checkPermissionForUpdate" >_checkPermissionForUpdate</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#_getContentIfExist" >_getContentIfExist</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#createFeedContent" >createFeedContent</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteContentFromId" >deleteContentFromId</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getContentFromId" >getContentFromId</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getContents" >getContents</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#likeContent" >likeContent</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#quoteContent" >quoteContent</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#recastContent" >recastContent</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#unLikeContent" >unLikeContent</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateContentFromId" >updateContentFromId</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_checkPermissionForUpdate"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>_checkPermissionForUpdate</b></span>
                        <a href="#_checkPermissionForUpdate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_checkPermissionForUpdate(content: <a href="../classes/Content.html" target="_self">ContentDocument</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="156"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:156</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>content</td>
                                    <td>
                                                <code><a href="../classes/Content.html" target="_self" >ContentDocument</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_getContentIfExist"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>_getContentIfExist</b></span>
                        <a href="#_getContentIfExist"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>_getContentIfExist(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="146"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:146</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="createFeedContent"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>createFeedContent</b></span>
                        <a href="#createFeedContent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>createFeedContent(body: <a href="../classes/SaveContentDto.html" target="_self">SaveContentDto</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiBody({type: SaveContentDto})<br />@ApiResponse({status: 201, type: ContentResponse})<br />@UseInterceptors(ContentInterceptor)<br />@Post(&#x27;feed&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="111"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:111</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>body</td>
                                    <td>
                                                <code><a href="../classes/SaveContentDto.html" target="_self" >SaveContentDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteContentFromId"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>deleteContentFromId</b></span>
                        <a href="#deleteContentFromId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteContentFromId(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiResponse({status: 204})<br />@UseInterceptors(CredentialInterceptor)<br />@HttpCode(204)<br />@Delete(&#x27;:id&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="212"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:212</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getContentFromId"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getContentFromId</b></span>
                        <a href="#getContentFromId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getContentFromId(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiOkResponse({type: ContentResponse})<br />@UseInterceptors(CredentialInterceptor)<br />@Get(&#x27;:id&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="136"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:136</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getContents"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>getContents</b></span>
                        <a href="#getContents"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getContents(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>, sortByOption: literal type, pageOption: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, limitOption: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, contentTypeOption: <a href="../classes/Content.html" target="_self">ContentType</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiOkResponse({type: ContentResponse})<br />@UseInterceptors(CredentialInterceptor)<br />@Get(&#x27;&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="228"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:228</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>sortByOption</td>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DEFAULT_CONTENT_QUERY_OPTIONS.sortBy</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>pageOption</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DEFAULT_CONTENT_QUERY_OPTIONS.page</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>limitOption</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DEFAULT_CONTENT_QUERY_OPTIONS.limit</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>contentTypeOption</td>
                                    <td>
                                                <code><a href="../classes/Content.html" target="_self" >ContentType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>DEFAULT_CONTENT_QUERY_OPTIONS.type</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="likeContent"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>likeContent</b></span>
                        <a href="#likeContent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>likeContent(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, authorId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiResponse({status: 204})<br />@UseInterceptors(CredentialInterceptor)<br />@Put(&#x27;:id/liked&#x27;)<br />@HttpCode(204)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="256"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:256</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>authorId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="quoteContent"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>quoteContent</b></span>
                        <a href="#quoteContent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>quoteContent(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, authorId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, message: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiResponse({status: 201, type: ContentResponse})<br />@UseInterceptors(CredentialInterceptor)<br />@Post(&#x27;:id/quotecast&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="345"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:345</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>authorId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>message</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="recastContent"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>recastContent</b></span>
                        <a href="#recastContent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>recastContent(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, authorId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiResponse({status: 201, type: ContentResponse})<br />@UseInterceptors(CredentialInterceptor)<br />@Post(&#x27;:id/recast&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="312"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:312</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>authorId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="unLikeContent"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>unLikeContent</b></span>
                        <a href="#unLikeContent"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>unLikeContent(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, authorId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiResponse({status: 204})<br />@UseInterceptors(CredentialInterceptor)<br />@Put(&#x27;:id/unliked&#x27;)<br />@HttpCode(204)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="284"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:284</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>authorId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateContentFromId"></a>
                    <span class="name">
                        <span class="modifier">Async</span>
                        <span ><b>updateContentFromId</b></span>
                        <a href="#updateContentFromId"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateContentFromId(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, body: <a href="../classes/SaveContentDto.html" target="_self">SaveContentDto</a>, req: <a href="../interfaces/CredentialRequest.html" target="_self">CredentialRequest</a>)</code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Decorators : </b>
                    <br />
                    <code>@ApiBearerAuth()<br />@ApiBody({type: SaveContentDto})<br />@ApiOkResponse({type: ContentResponse})<br />@UseInterceptors(ContentInterceptor)<br />@Put(&#x27;:id&#x27;)<br /></code>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="190"
                            class="link-to-prism">apps/contents/src/app/app.controller.ts:190</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>body</td>
                                    <td>
                                                <code><a href="../classes/SaveContentDto.html" target="_self" >SaveContentDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>req</td>
                                    <td>
                                                <code><a href="../interfaces/CredentialRequest.html" target="_self" >CredentialRequest</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>unknown</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">/*
 * Copyright (c) 2021, Castcle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 3 only, as
 * published by the Free Software Foundation.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
 * version 3 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 3 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Castcle, 22 Phet Kasem 47/2 Alley, Bang Khae, Bangkok,
 * Thailand 10160, or visit www.castcle.com if you need additional information
 * or have any questions.
 */

import {
  Body,
  Controller,
  Delete,
  Get,
  HttpCode,
  Param,
  Post,
  Put,
  Query,
  Req,
  UseInterceptors
} from &#x27;@nestjs/common&#x27;;
import { AppService } from &#x27;./app.service&#x27;;
import {
  AuthenticationService,
  UserService,
  ContentService
} from &#x27;@castcle-api/database&#x27;;
import { CastLogger, CastLoggerOptions } from &#x27;@castcle-api/logger&#x27;;
import {
  ContentResponse,
  ContentType,
  DEFAULT_CONTENT_QUERY_OPTIONS,
  SaveContentDto
} from &#x27;@castcle-api/database/dtos&#x27;;
import {
  CredentialInterceptor,
  CredentialRequest,
  ContentInterceptor
} from &#x27;@castcle-api/utils/interceptors&#x27;;
import { CastcleException, CastcleStatus } from &#x27;@castcle-api/utils/exception&#x27;;
import {
  ApiBearerAuth,
  ApiBody,
  ApiHeader,
  ApiOkResponse,
  ApiProperty,
  ApiResponse
} from &#x27;@nestjs/swagger&#x27;;
import { ContentDocument } from &#x27;@castcle-api/database/schemas&#x27;;
import {
  ContentTypePipe,
  LimitPipe,
  PagePipe,
  SortByPipe
} from &#x27;@castcle-api/utils/pipes&#x27;;
import { Configs } from &#x27;@castcle-api/environments&#x27;;

@ApiHeader({
  name: Configs.RequiredHeaders.AcceptLanguague.name,
  description: Configs.RequiredHeaders.AcceptLanguague.description,
  example: Configs.RequiredHeaders.AcceptLanguague.example,
  required: true
})
@ApiHeader({
  name: Configs.RequiredHeaders.AcceptVersion.name,
  description: Configs.RequiredHeaders.AcceptVersion.description,
  example: Configs.RequiredHeaders.AcceptVersion.example,
  required: true
})
@Controller({
  version: &#x27;1.0&#x27;
})
@Controller()
export class ContentController {
  constructor(
    private readonly appService: AppService,
    private authService: AuthenticationService,
    private userService: UserService,
    private contentService: ContentService
  ) {}
  private readonly logger &#x3D; new CastLogger(
    ContentController.name,
    CastLoggerOptions
  );

  @ApiBearerAuth()
  @ApiBody({
    type: SaveContentDto
  })
  @ApiResponse({
    status: 201,
    type: ContentResponse
  })
  @UseInterceptors(ContentInterceptor)
  @Post(&#x27;feed&#x27;)
  async createFeedContent(
    @Body() body: SaveContentDto,
    @Req() req: CredentialRequest
  ) {
    if (
      req.$credential.account.isGuest ||
      !req.$credential.account.activateDate
    )
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
    const user &#x3D; await this.userService.getUserFromCredential(req.$credential);
    const content &#x3D; await this.contentService.createContentFromUser(user, body);
    return {
      payload: content.toContentPayload()
    } as ContentResponse;
  }

  @ApiBearerAuth()
  @ApiOkResponse({
    type: ContentResponse
  })
  @UseInterceptors(CredentialInterceptor)
  @Get(&#x27;:id&#x27;)
  async getContentFromId(
    @Param(&#x27;id&#x27;) id: string,
    @Req() req: CredentialRequest
  ) {
    const content &#x3D; await this._getContentIfExist(id, req);
    return {
      payload: content.toContentPayload()
    } as ContentResponse;
  }

  async _getContentIfExist(id: string, req: CredentialRequest) {
    const content &#x3D; await this.contentService.getContentFromId(id);
    if (content) return content;
    else
      throw new CastcleException(
        CastcleStatus.REQUEST_URL_NOT_FOUND,
        req.$language
      );
  }

  async _checkPermissionForUpdate(
    content: ContentDocument,
    req: CredentialRequest
  ) {
    if (
      req.$credential.account.isGuest ||
      !req.$credential.account.activateDate
    )
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
    const user &#x3D; await this.userService.getUserFromCredential(req.$credential);
    const result &#x3D; this.contentService.checkUserPermissionForEditContent(
      user,
      content
    );
    if (result) return true;
    else
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
  }

  @ApiBearerAuth()
  @ApiBody({
    type: SaveContentDto
  })
  @ApiOkResponse({
    type: ContentResponse
  })
  @UseInterceptors(ContentInterceptor)
  @Put(&#x27;:id&#x27;)
  async updateContentFromId(
    @Param(&#x27;id&#x27;) id: string,
    @Body() body: SaveContentDto,
    @Req() req: CredentialRequest
  ) {
    const content &#x3D; await this._getContentIfExist(id, req);
    await this._checkPermissionForUpdate(content, req);
    const updatedContent &#x3D; await this.contentService.updateContentFromId(
      content._id,
      body
    );
    return {
      payload: updatedContent.toContentPayload()
    } as ContentResponse;
  }
  @ApiBearerAuth()
  @ApiResponse({
    status: 204
  })
  @UseInterceptors(CredentialInterceptor)
  @HttpCode(204)
  @Delete(&#x27;:id&#x27;)
  async deleteContentFromId(
    @Param(&#x27;id&#x27;) id: string,
    @Req() req: CredentialRequest
  ) {
    const content &#x3D; await this._getContentIfExist(id, req);
    await this._checkPermissionForUpdate(content, req);
    content.delete();
    return &#x27;&#x27;;
  }

  @ApiBearerAuth()
  @ApiOkResponse({
    type: ContentResponse
  })
  @UseInterceptors(CredentialInterceptor)
  @Get(&#x27;&#x27;)
  async getContents(
    @Param(&#x27;id&#x27;) id: string,
    @Req() req: CredentialRequest,
    @Query(&#x27;sortBy&#x27;, SortByPipe)
    sortByOption: {
      field: string;
      type: &#x27;desc&#x27; | &#x27;asc&#x27;;
    } &#x3D; DEFAULT_CONTENT_QUERY_OPTIONS.sortBy,
    @Query(&#x27;page&#x27;, PagePipe)
    pageOption: number &#x3D; DEFAULT_CONTENT_QUERY_OPTIONS.page,
    @Query(&#x27;limit&#x27;, LimitPipe)
    limitOption: number &#x3D; DEFAULT_CONTENT_QUERY_OPTIONS.limit,
    @Query(&#x27;type&#x27;, ContentTypePipe)
    contentTypeOption: ContentType &#x3D; DEFAULT_CONTENT_QUERY_OPTIONS.type
  ) {
    const content &#x3D; await this._getContentIfExist(id, req);
    return {
      payload: content.toContentPayload()
    } as ContentResponse;
  }

  @ApiBearerAuth()
  @ApiResponse({
    status: 204
  })
  @UseInterceptors(CredentialInterceptor)
  @Put(&#x27;:id/liked&#x27;)
  @HttpCode(204)
  async likeContent(
    @Param(&#x27;id&#x27;) id: string,
    @Body(&#x27;authorId&#x27;) authorId: string,
    @Req() req: CredentialRequest
  ) {
    //TODO !!! has to add feedItem once implement
    const content &#x3D; await this._getContentIfExist(id, req);
    const account &#x3D; await this.authService.getAccountFromCredential(
      req.$credential
    );
    const user &#x3D; await this.userService.getUserFromId(authorId);
    if (user.ownerAccount !&#x3D;&#x3D; account._id) {
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
    }
    await this.contentService.likeContent(content, user);
    return &#x27;&#x27;;
  }

  @ApiBearerAuth()
  @ApiResponse({
    status: 204
  })
  @UseInterceptors(CredentialInterceptor)
  @Put(&#x27;:id/unliked&#x27;)
  @HttpCode(204)
  async unLikeContent(
    @Param(&#x27;id&#x27;) id: string,
    @Body(&#x27;authorId&#x27;) authorId: string,
    @Req() req: CredentialRequest
  ) {
    //TODO !!! has to add feedItem once implement
    const content &#x3D; await this._getContentIfExist(id, req);
    const account &#x3D; await this.authService.getAccountFromCredential(
      req.$credential
    );
    const user &#x3D; await this.userService.getUserFromId(authorId);
    if (user.ownerAccount !&#x3D;&#x3D; account._id) {
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
    }
    await this.contentService.unLikeContent(content, user);
    return &#x27;&#x27;;
  }

  @ApiBearerAuth()
  @ApiResponse({
    status: 201,
    type: ContentResponse
  })
  @UseInterceptors(CredentialInterceptor)
  @Post(&#x27;:id/recast&#x27;)
  async recastContent(
    @Param(&#x27;id&#x27;) id: string,
    @Body(&#x27;authorId&#x27;) authorId: string,
    @Req() req: CredentialRequest
  ) {
    //TODO !!! has to add feedItem once implement
    const content &#x3D; await this._getContentIfExist(id, req);
    const account &#x3D; await this.authService.getAccountFromCredential(
      req.$credential
    );
    const user &#x3D; await this.userService.getUserFromId(authorId);
    if (user.ownerAccount !&#x3D;&#x3D; account._id) {
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
    }
    const result &#x3D; await this.contentService.recastContentFromUser(
      content,
      user
    );
    return {
      payload: result.recastContent.toContentPayload()
    } as ContentResponse;
  }

  @ApiBearerAuth()
  @ApiResponse({
    status: 201,
    type: ContentResponse
  })
  @UseInterceptors(CredentialInterceptor)
  @Post(&#x27;:id/quotecast&#x27;)
  async quoteContent(
    @Param(&#x27;id&#x27;) id: string,
    @Body(&#x27;authorId&#x27;) authorId: string,
    @Body(&#x27;message&#x27;) message: string,
    @Req() req: CredentialRequest
  ) {
    //TODO !!! has to add feedItem once implement
    const content &#x3D; await this._getContentIfExist(id, req);
    const account &#x3D; await this.authService.getAccountFromCredential(
      req.$credential
    );
    const user &#x3D; await this.userService.getUserFromId(authorId);
    if (user.ownerAccount !&#x3D;&#x3D; account._id) {
      throw new CastcleException(
        CastcleStatus.FORBIDDEN_REQUEST,
        req.$language
      );
    }
    const result &#x3D; await this.contentService.quoteContentFromUser(
      content,
      user,
      message
    );
    return {
      payload: result.quoteContent.toContentPayload()
    } as ContentResponse;
  }
}
</code></pre>
    </div>
</div>









                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'controller';
            var COMPODOC_CURRENT_PAGE_URL = 'ContentController.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
